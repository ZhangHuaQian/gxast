(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-655de42e"],{1437:function(t,e,i){"use strict";var n=i("1988"),a=i("a142"),s=i("8624"),o=i("7744"),c=i("dfaf"),r=i("f331"),l=Object(a["k"])("collapse-item"),h=l[0],p=l[1],u=["title","icon","right-icon"];e["a"]=h({mixins:[r["a"]],props:Object(n["a"])({},c["a"],{name:[String,Number],disabled:Boolean,isLink:{type:Boolean,default:!0}}),data:function(){return{show:null,inited:null}},computed:{items:function(){return this.parent.items},index:function(){return this.items.indexOf(this)},currentName:function(){return Object(a["d"])(this.name)?this.name:this.index},expanded:function(){var t=this;if(!this.parent)return null;var e=this.parent.value;return this.parent.accordion?e===this.currentName:e.some(function(e){return e===t.currentName})}},created:function(){this.findParent("van-collapse"),this.items.push(this),this.show=this.expanded,this.inited=this.expanded},destroyed:function(){this.items.splice(this.index,1)},watch:{expanded:function(t,e){var i=this;null!==e&&(t&&(this.show=!0,this.inited=!0),Object(s["a"])(function(){var e=i.$refs,n=e.content,a=e.wrapper;if(n&&a){var o=n.clientHeight;if(o){var c=o+"px";a.style.height=t?0:c,Object(s["a"])(function(){a.style.height=t?c:0})}else i.onTransitionEnd()}}))}},methods:{onClick:function(){if(!this.disabled){var t=this.parent,e=t.accordion&&this.currentName===t.value?"":this.currentName,i=!this.expanded;this.parent["switch"](e,i)}},onTransitionEnd:function(){this.expanded?this.$refs.wrapper.style.height=null:this.show=!1}},render:function(t){var e=this,i=u.reduce(function(t,i){return e.slots(i)&&(t[i]=function(){return e.slots(i)}),t},{});this.slots("value")&&(i["default"]=function(){return e.slots("value")});var a=t(o["a"],{class:p("title",{disabled:this.disabled,expanded:this.expanded}),on:{click:this.onClick},scopedSlots:i,props:Object(n["a"])({},this.$props)}),s=this.inited&&t("div",{directives:[{name:"show",value:this.show}],ref:"wrapper",class:p("wrapper"),on:{transitionend:this.onTransitionEnd}},[t("div",{ref:"content",class:p("content")},[this.slots()])]);return t("div",{class:[p(),{"van-hairline--top":this.index}]},[a,s])}})},"342a":function(t,e,i){"use strict";i("68ef"),i("bff0")},"5d17":function(t,e,i){"use strict";i("68ef")},"66b9":function(t,e,i){"use strict";i("68ef")},"6a39":function(t,e,i){"use strict";i("68ef"),i("b925")},8585:function(t,e,i){},8624:function(t,e,i){"use strict";(function(t){i.d(e,"a",function(){return r});var n=i("a142"),a=Date.now();function s(t){var e=Date.now(),i=Math.max(0,16-(e-a)),n=setTimeout(t,i);return a=e+i,n}var o=n["h"]?t:window,c=o.requestAnimationFrame||s;o.cancelAnimationFrame||o.clearTimeout;function r(t){return c.call(o,t)}}).call(this,i("c8ba"))},b925:function(t,e,i){},bff0:function(t,e,i){},c3a6:function(t,e,i){"use strict";i("68ef")},dc1d:function(t,e,i){"use strict";i.r(e);var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"background-color":"white"},attrs:{id:"topic"}},[i("p",{staticStyle:{"margin-left":"10px","margin-bottom":"2px","margin-top":"0px","font-size":"18px","font-weight":"bold","padding-top":"10px"}},[t._v(t._s(t.topic.title))]),i("div",{staticStyle:{width:"100%",height:"60px",display:"flex"}},[i("div",{staticStyle:{width:"50px",height:"50px",margin:"10px"}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t._f("photoPath")(t.user.photo)}})]),i("div",[i("p",{staticStyle:{margin:"8px","margin-left":"4px","margin-bottom":"0px"}},[t._v(t._s(t.user.name))]),i("div",[i("span",{staticStyle:{margin:"10px 3px","font-size":"12px",color:"gray","margin-top":"5px"}},[t._v(t._s(t._f("formatDate")(t.topic.createTime)))]),t.login?i("span",{staticStyle:{"margin-left":"100px"},on:{click:t.like}},[t._v(t._s(t.topic.likeNum)),i("van-icon",{attrs:{name:"like-o"}})],1):t._e()])])]),i("div",[i("div",{staticStyle:{margin:"8px","margin-left":"70px","margin-bottom":"100px"},attrs:{id:"content"},domProps:{innerHTML:t._s(t.html_decode(t.topic.content))}}),t.login?i("button",{staticClass:"send",on:{click:t.reply1}},[t._v("发表评论")]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.commentList.length>0,expression:"commentList.length>0"}]},[i("p",{staticStyle:{"text-align":"center","margin-top":"10px"}},[t._v("回帖")])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content1,expression:"content1"}],staticStyle:{width:"90%",height:"100px",margin:"10px 4%"},domProps:{value:t.content1},on:{input:function(e){e.target.composing||(t.content1=e.target.value)}}}),i("button",{staticClass:"send",on:{click:t.reply}},[t._v("确认")])]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content2,expression:"content2"}],staticStyle:{width:"90%",height:"100px",margin:"10px 4%"},domProps:{value:t.content2},on:{input:function(e){e.target.composing||(t.content2=e.target.value)}}}),i("button",{staticClass:"send",on:{click:t.send_reply}},[t._v("回复")])]),i("div",{staticStyle:{width:"100%",height:"auto"}},[t._l(t.commentList,function(e){return i("div",{staticStyle:{"border-top":"1px solid lightgray"}},[i("div",{staticStyle:{width:"100%",height:"60px",display:"flex"}},[i("div",{staticStyle:{width:"50px",height:"50px",margin:"10px"}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t._f("photoPath")(e.comment.userPhoto)}})]),i("div",[i("p",{staticStyle:{margin:"8px","margin-left":"4px","margin-bottom":"0px"}},[t._v(t._s(e.comment.userName))]),i("p",{staticStyle:{margin:"10px 3px","font-size":"12px",color:"gray","margin-top":"5px"}},[t._v(t._s(t._f("formatDate")(e.comment.createTime)))])])]),i("div",{staticStyle:{width:"100%",height:"auto",display:"flex","margin-bottom":"10px"}},[i("div",{staticStyle:{height:"100%",width:"85px"}}),i("div",{staticStyle:{height:"100%",width:"inherit"}},[i("p",{staticStyle:{margin:"0px 4px","word-wrap":"break-word"}},[t._v(t._s(e.comment.content))]),e.toconmmentList.length>0?i("div",{staticStyle:{width:"95%",height:"auto","background-color":"white"}},[i("van-collapse",{model:{value:e.active,callback:function(i){t.$set(e,"active",i)},expression:"item.active"}},[i("van-collapse-item",{attrs:{title:"查看回复",name:"1"}},t._l(e.toconmmentList,function(n){return i("div",{staticStyle:{"border-top":"1px solid #E8E8E8"}},[i("div",{staticStyle:{width:"100%",height:"50px",display:"flex"}},[i("div",{staticStyle:{width:"30px",height:"30px",margin:"10px"}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t._f("photoPath")(n.userPhoto)}})]),i("div",[i("p",{staticStyle:{margin:"3px 4px"}},[t._v(t._s(n.username))]),i("p",{staticStyle:{margin:"0px 4px","font-size":"12px",color:"gray"}},[t._v(t._s(t._f("formatDate")(n.createDate)))])])]),i("div",[i("p",{staticStyle:{margin:"0px 0px 0px 54px"}},[t._v("回复 "+t._s(n.tousername)+": "+t._s(n.rcontent))]),i("p",{staticStyle:{margin:"0px 0px 0px 54px",color:"#2196f3"},on:{click:function(i){return t.reply2(n.userId,e.comment.cid)}}},[t._v("回复")])])])}),0)],1)],1):t._e(),i("span",{staticStyle:{margin:"6px 4px 4px 4px",color:"#2196f3"},on:{click:function(i){return t.reply2(e.comment.uid,e.comment.cid)}}},[t._v("回复")])])])])}),i("van-pagination",{directives:[{name:"show",rawName:"v-show",value:t.commentList.length>0,expression:"commentList.length>0"}],attrs:{"page-count":t.comment_count,mode:"simple"},on:{change:t.changePage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],2)],1)])},s=[],o=i("bd86"),c=(i("c3a6"),i("ad06")),r=(i("4662"),i("28a2")),l=(i("6a39"),i("f240")),h=(i("342a"),i("1437")),p=(i("5d17"),i("f9bd")),u=(i("8a58"),i("e41f")),d=(i("66b9"),i("b650")),m=(i("e7e5"),i("d399")),f=i("bc3a"),g=i.n(f),v=i("b1ef"),x=i("440a"),b=i("2b0e"),_=i("2b27"),w=i.n(_);b["a"].use(w.a);var y={components:(n={},Object(o["a"])(n,m["a"].name,m["a"]),Object(o["a"])(n,d["a"].name,d["a"]),Object(o["a"])(n,u["a"].name,u["a"]),Object(o["a"])(n,p["a"].name,p["a"]),Object(o["a"])(n,h["a"].name,h["a"]),Object(o["a"])(n,l["a"].name,l["a"]),Object(o["a"])(n,r["a"].name,r["a"]),Object(o["a"])(n,c["a"].name,c["a"]),n),filters:{photoPath:function(t){return v["a"].resoursePhoto+t},formatDate:function(t){return Object(x["a"])(t,"yyyy-MM-dd hh:mm:ss")}},created:function(){null!=$cookies.get("cen_xczhapp_token")&&(this.login=!0),this.ajax()},data:function(){return{pid:0,login:!1,images:[],type:"",like_text:"",like_count:0,like_flag:0,page:1,limit:10,comment_count:0,aid:0,reply_id:0,content1:"",content2:"",activeNames:["0"],show1:!1,show2:!1,commentList:[],error:"",topic:{title:"-",createTime:0,content:"-"},user:{photo:"",name:""},type_list:["phoneNews","phoneNewsAxhd","phoneNewsZwgk"]}},methods:{Preview:function(){Object(r["a"])(this.images)},like:function(){var t=this;if(0==this.like_flag?(this.like_count++,this.like_flag=1,this.like_text="已赞"+this.like_count):1==this.like_flag&&(this.like_count--,this.like_flag=0,this.like_text="点赞"+this.like_count),null==this.$cookies.get("cen_xczhapp_token"))return Object(m["a"])("请先登录"),!1;g()({method:"get",url:v["a"].baseURL+"appsite/bbs/likeit",params:{tid:this.aid,cen_xczhapp_token:this.$cookies.get("cen_xczhapp_token")}}).then(function(e){t.topic.likeNum=e.data.likeNum}).catch(function(t){m["a"].fail("请求失败")})},changePage:function(){this.ajax()},reply1:function(){this.show1=!0},reply2:function(t,e){this.pid=e,this.reply_id=t,this.show2=!0},reply:function(){var t=this;if(""==this.content1)return Object(m["a"])("评论不能为空"),!1;g()({method:"post",url:v["a"].baseURL+"appsite/bbs/insertcomment",params:{tid:this.aid,content:this.content1,cen_xczhapp_token:this.$cookies.get("cen_xczhapp_token")}}).then(function(e){"1"==e.data.status?(m["a"].success(e.data.msg),setTimeout(function(){t.$router.go(0)},1e3)):(m["a"].fail(e.data.msg),t.show1=!1)}).catch(function(t){m["a"].fail("请求失败")})},send_reply:function(){var t=this;if(""==this.content2)return Object(m["a"])("评论不能为空"),!1;g()({method:"post",url:v["a"].baseURL+"appsite/bbs/answer",params:{pid:this.pid,tid:this.aid,toid:this.reply_id,rcontent:this.content2,cen_xczhapp_token:this.$cookies.get("cen_xczhapp_token")}}).then(function(e){"1"==e.data.status?(m["a"].success(e.data.msg),setTimeout(function(){t.$router.go(0)},1e3)):(m["a"].fail(e.data.msg),t.show1=!1)}).catch(function(t){m["a"].fail("请求失败")})},html_decode:function(t){return Object(x["b"])(t+"")},ajax:function(){var t=this;m["a"].loading({mask:!0,message:"加载中...",duration:0}),g()({method:"get",url:v["a"].baseURL+"appsite/bbs/details",params:{pageSize:this.limit,pageNum:this.page,id:this.$route.query.id,cen_xczhapp_token:this.$cookies.get("cen_xczhapp_token")}}).then(function(e){t.topic=e.data.topic,t.aid=t.topic.tid,t.user=e.data.user;for(var i=0;i<e.data.topiclist.length;i++)e.data.topiclist[i].active=["0"],t.commentList.push(e.data.topiclist[i]);m["a"].clear()}).catch(function(t){console.log(t),m["a"].clear(),m["a"].fail("请求失败")})}}},k=y,S=(i("ec68"),i("2877")),j=Object(S["a"])(k,a,s,!1,null,null,null);e["default"]=j.exports},ec68:function(t,e,i){"use strict";var n=i("8585"),a=i.n(n);a.a},f240:function(t,e,i){"use strict";var n=i("a142"),a=Object(n["k"])("pagination"),s=a[0],o=a[1],c=a[2];function r(t,e,i){return{number:t,text:e,active:i}}e["a"]=s({props:{value:Number,prevText:String,nextText:String,pageCount:Number,totalItems:Number,forceEllipses:Boolean,mode:{type:String,default:"multi"},itemsPerPage:{type:Number,default:10},showPageSize:{type:Number,default:5}},computed:{count:function(){var t=this.pageCount||Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(1,t)},pages:function(){var t=[],e=this.count;if("multi"!==this.mode)return t;var i=1,n=e,a=void 0!==this.showPageSize&&this.showPageSize<e;a&&(i=Math.max(this.value-Math.floor(this.showPageSize/2),1),n=i+this.showPageSize-1,n>e&&(n=e,i=n-this.showPageSize+1));for(var s=i;s<=n;s++){var o=r(s,s,s===this.value);t.push(o)}if(a&&this.showPageSize>0&&this.forceEllipses){if(i>1){var c=r(i-1,"...",!1);t.unshift(c)}if(n<e){var l=r(n+1,"...",!1);t.push(l)}}return t}},watch:{value:{handler:function(t){this.select(t||this.value)},immediate:!0}},methods:{select:function(t,e){t=Math.min(this.count,Math.max(1,t)),this.value!==t&&(this.$emit("input",t),e&&this.$emit("change",t))}},render:function(t){var e=this,i=this.value,n="multi"!==this.mode,a=function(t){return function(){e.select(t,!0)}};return t("ul",{class:o({simple:n})},[t("li",{class:[o("item",{disabled:1===i}),o("prev"),"van-hairline"],on:{click:a(i-1)}},[this.prevText||c("prev")]),this.pages.map(function(e){return t("li",{class:[o("item",{active:e.active}),o("page"),"van-hairline"],on:{click:a(e.number)}},[e.text])}),n&&t("li",{class:o("page-desc")},[this.slots("pageDesc")||i+"/"+this.count]),t("li",{class:[o("item",{disabled:i===this.count}),o("next"),"van-hairline"],on:{click:a(i+1)}},[this.nextText||c("next")])])}})},f331:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n={data:function(){return{parent:null}},methods:{findParent:function(t){var e=this.$parent;while(e){if(e.$options.name===t){this.parent=e;break}e=e.$parent}}}}},f9bd:function(t,e,i){"use strict";var n=i("a142"),a=Object(n["k"])("collapse"),s=a[0],o=a[1];e["a"]=s({props:{accordion:Boolean,value:[String,Number,Array],border:{type:Boolean,default:!0}},data:function(){return{items:[]}},methods:{switch:function(t,e){this.accordion||(t=e?this.value.concat(t):this.value.filter(function(e){return e!==t})),this.$emit("change",t),this.$emit("input",t)}},render:function(t){return t("div",{class:[o(),{"van-hairline--top-bottom":this.border}]},[this.slots()])}})}}]);